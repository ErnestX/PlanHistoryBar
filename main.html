<!DOCTYPE html>
<!--http://www.kirupa.com/html5/creating_a_sweet_content_slider.htm-->
<html>
<head>
    <script src="jquery-1.11.3.js"></script>
    <script src="uiHelpers.js"></script>
    <script>$(document).ready(function(){
        var photoBar = document.createElement("div");
    
        var activePhotoIndex = 3;
        var rangeLeft = 0;
        var rangeRight = 7;
    
        photoBar.classList.add("bar");
        document.getElementById("barContainer").appendChild(photoBar);
        var i;
        for (i=rangeLeft; i < rangeRight; i++) {
            var img = getPlanAtIndex(i);
            initPlan(img);
            photoBar.appendChild(img);
        }
        
//        highlightObject(photos[activePhotoIndex]);
        selectIndex[activePhotoIndex];
        
        $("#left").click(function(){
            if (activePhotoIndex - 1 >= 0) {
                activePhotoIndex--;
                selectIndex(activePhotoIndex);
                
//                if (rangeLeft > 0) {
                    var newImg = initPlan(getPlanAtIndex(rangeLeft - 1));
                    photoBar.insertBefore(document.createElement(newImg), photoBar.children[0]);
                rangeLeft -= 1;
//                }
            }
        })
        
        $("#right").click(function() {
//            if (activePhotoIndex + 1 < photos.length) {
                activePhotoIndex++;
                selectIndex(activePhotoIndex);
                
                photoBar.removeChild(photoBar.children[0]);
                rangeLeft+=1;
//                console.log(activePhotoIndex);
//            }
        })
        
        function selectIndex(planIndex) {
//            console.log(photos[planIndex].offsetLeft);
            var i;
            for (i=0; i < rangeRight - rangeLeft + 1; i++) {
                unHighlightObject(photoBar.children[i]);
            }
            
            highlightObject(photoBar.children[planIndex - rangeLeft]);
        }
    
        function initPlan(plan) {
            img.classList.add("photo");
            img.classList.add("unselected");
        }
    })
    </script>
    <link rel=stylesheet href="style.css">
</head>

<body>
    <div id="barContainer"> 
        <div id="charts"></div>
    </div>
    <div id="detailView"></div>
    
    <p>
        <button id="left">left</button>
        <button id="right">right</button>
    </p>
    <p>
        <button id="lastPage">last page</button>
        <button id="nextPage">next page</button>
    </p>
</body>
</html>