<!DOCTYPE html>
<!--http://www.kirupa.com/html5/creating_a_sweet_content_slider.htm-->
<html>
<head>
    <script src="jquery-1.11.3.js"></script>
    <script src="velocity.js"></script>
    <script src="snap.svg-min.js"></script>
    <script src="Helpers.js"></script>
    
    <script src="PlansManager.js"></script>
    <script src="PlansRenderer.js"></script>
    <script src="ThumbnailsRenderer.js"></script>
    <script src="PlansContainerAnimatior.js"></script>
    <script src="Plan.js"></script>
    <script src="DataManager.js"></script>
    <script src="PreviewWindowManager.js"></script>
    <script src="ThumbnailDivRenderer.js"></script>
    <script src="GraphsRenderer.js"></script>
    
    <script>$(document).ready(function() {
        MY_GLOBAL.dataManager.addPlanInitedWithParas('name1', '', '');
        MY_GLOBAL.dataManager.addPlanInitedWithParas('name2', '', '');
        MY_GLOBAL.dataManager.addPlanInitedWithParas('name2', '', '');
        MY_GLOBAL.dataManager.addPlanInitedWithParas('name2', '', '');
        MY_GLOBAL.dataManager.addPlanInitedWithParas('name2', '', '');
        MY_GLOBAL.dataManager.addPlanInitedWithParas('name2', '', '');
        MY_GLOBAL.dataManager.addPlanInitedWithParas('name2', '', '');
        MY_GLOBAL.dataManager.addPlanInitedWithParas('name2', '', '');
        MY_GLOBAL.dataManager.addPlanInitedWithParas('name2', '', '');
        MY_GLOBAL.dataManager.addPlanInitedWithParas('name2', '', '');
        MY_GLOBAL.dataManager.addPlanInitedWithParas('name2', '', '');
        MY_GLOBAL.dataManager.addPlanInitedWithParas('name2', '', '');
        MY_GLOBAL.dataManager.addPlanInitedWithParas('name2', '', '');
        MY_GLOBAL.dataManager.addPlanInitedWithParas('name2', '', '');
        MY_GLOBAL.dataManager.addPlanInitedWithParas('name2', '', '');
        MY_GLOBAL.dataManager.addPlanInitedWithParas('name2', '', '');
        MY_GLOBAL.dataManager.addPlanInitedWithParas('name2', '', '');
        MY_GLOBAL.dataManager.addPlanInitedWithParas('name2', '', '');
        MY_GLOBAL.dataManager.addPlanInitedWithParas('name2', '', '');
    
        MY_GLOBAL.activePhotoIndex = 0; // the initial index to select

        MY_GLOBAL.plansRenderer.initWithContainer($("#thumbnailsBar"));
        MY_GLOBAL.thumbnailsRenderer.initWithContainer($("#thumbnailsBar"));
        MY_GLOBAL.graphsRenderer.initWithGraphsContainerInString('#graphsContainer');
    
        MY_GLOBAL.
        previewWindowManager.
        initWithPreviewWindowAndIndex($("#previewWindow"), MY_GLOBAL.activePhotoIndex);
        MY_GLOBAL.plansContainerAnimator.initWithContainer($('#plansContainer'));
        MY_GLOBAL.plansManager.initWithSize(15);
    
        MY_GLOBAL.plansManager.selectIndex(MY_GLOBAL.activePhotoIndex);
        
        $("#left").click(function() {
//            MY_GLOBAL.activePhotoIndex--;
            MY_GLOBAL.plansContainerAnimator.animateShifting(false, function() {
                MY_GLOBAL.plansManager.moveBarRightByOnePlan();    
            });
            if (MY_GLOBAL.plansManager.selectIndex(MY_GLOBAL.activePhotoIndex - 1)) {
                MY_GLOBAL.activePhotoIndex--;
            }
            MY_GLOBAL.previewWindowManager.showPreviewForPlanIndex(MY_GLOBAL.activePhotoIndex);
        });
        
        $("#right").click(function() {
//            MY_GLOBAL.activePhotoIndex++;
            MY_GLOBAL.plansContainerAnimator.animateShifting(true, function() {
                MY_GLOBAL.plansManager.moveBarLeftByOnePlan(); 
            });
            if (MY_GLOBAL.plansManager.selectIndex(MY_GLOBAL.activePhotoIndex + 1)) {
                MY_GLOBAL.activePhotoIndex++;
            }
            MY_GLOBAL.previewWindowManager.showPreviewForPlanIndex(MY_GLOBAL.activePhotoIndex);
        });
    
        $("#addIndicator").click(function() {
            MY_GLOBAL.graphsRenderer.createRendererWithNameOntoRow('testing', 0);
        });
    });
    </script>
    <link rel=stylesheet href="style.css">
</head>

<body>
    <div id = "sideBar">this is the side bar</div>
    <div id="bodyContainer">
        <div id="plansOuterContainer"> <!-- used to mask the plansContainer -->
            <div id="plansContainer">
                <svg id="graphsContainer"></svg>
                <div id="thumbnailsBar"></div> <!-- the array of plans -->
            </div>
        </div>
        <div id="previewWindow"></div>
    
        <p>
            <button id="left">left</button>
            <button id="right">right</button>
<!--            <button id="addIndicator">add indicator</button>-->
        </p>
    </div>
</body>
</html>